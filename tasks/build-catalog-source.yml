---
- name: Setting up workload for user
  debug:
    msg: "Building Catalog Source"

- name: Get the manifests
  command: "oc adm catalog build --appregistry-endpoint {{ appregistry-endpoint }} --appregistry-org {{ appregistry-org }} --manifest-dir={{ appregistry-org }} manifests"
  vars:
    appregistry-endpoint: "https://quay.io/cnr"
    appregistry-org: "redhat-operators"

# Leave this as the last task in the playbook.
- name: tasks complete
  debug:
    msg: "Build Catalog Source Tasks completed successfully."
  when: not silent|bool